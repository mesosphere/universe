{
  "$schema": "http://json-schema.org/schema#",
  "type": "object",
  "properties": {
    "kafka": {
      "type": "object",
      "description": "DC/OS service configuration properties",
      "properties": {
        "cpus": {
          "default": 7,
          "description": "CPU shares to allocate to each kafka instance.",
          "minimum": 1,
          "type": "number"
        },
        "mem": {
          "default": 12288.0,
          "description": "Memory (MB) to allocate to each marathon task.",
          "minimum": 2048.0,
          "type": "number"
        },
        "instances": {
          "default": 3,
          "description": "The instance number of the kafka serivce",
          "minimum": 1,
          "type": "integer"
        },
        "name": {
          "default": "kafka",
          "description": "Name for this LB instance",
          "type": "string"
        },
        "user": {
          "default": "data-eng",
          "description": "Deploy kafka with this user.",
          "type": "string"
        },
        "mesos_agent_app_lable": {
          "default": "kafka",
          "description": "The app lable of the mesos agenets that will run kafka service",
          "type": "string"
        }
      },
      "required": ["cpus", "mem", "name"]
    },
    "broker": {
      "description":"Kafka broker configuration properties",
      "type":"object",
      "properties": {
        "zookeeper": {
          "default": "master.mesos:2181/apache-kafka",
          "description": "Deploy kafka with this zookeeper.",
          "type": "string"
        },
        "port": {
          "description": "Port for broker to listen on",
          "type": "integer",
          "default": 9092
        },
        "jmx_port": {
          "description": "Port for kafka jmx",
          "type": "integer",
          "default": 7071
        },
        "log_dir": {
          "default": "/mnt/kafka",
          "description": "The dir all volumes should mounted under, such as data1, data2...",
          "type": "string"
        },
        "heap_opts": {
          "default": "-Xmx8g -Xms8g -XX:MetaspaceSize=96m -XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35 -XX:G1HeapRegionSize=16M -XX:MinMetaspaceFreeRatio=50 -XX:MaxMetaspaceFreeRatio=80",
          "description": "The jmx heap opts",
          "type": "string"
        }
      }
    }
  }
}
