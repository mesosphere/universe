{
    "id": "{{service.name}}",
    "cpus": {{service.cpus}},
    "mem": {{service.mem}},
    "instances": 1,
    "container": {
        "type": "DOCKER",
        "docker": {
            "image": "{{resource.assets.container.docker.minio-docker-RELEASE.2016-09-11T17-42-18Z}}",
            "network": "BRIDGE",
            "portMappings": [
               { "containerPort": 80, "hostPort": 0 }
           ]
        },
        "volumes": [
           {{^storage.external-volumes.enabled}}
            {
                "containerPath": "/export",
                "hostPath": "{{storage.local-volumes.host-volume}}/{{service.name}}/data",
                "mode": "RW"
            },
            {
              "containerPath": "/root/.minio",
              "hostPath": "{{storage.local-volumes.host-volume}}/{{service.name}}/config",
              "mode": "RW"
            }
            {{/storage.external-volumes.enabled}}
            {{#storage.external-volumes.enabled}}
            {{/storage.external-volumes.enabled}}

        ]
    },
    "healthChecks": [
        {
            "protocol": "HTTP",
            "path": "/",
            "portIndex": 0,

            "gracePeriodSeconds": 300,
            "intervalSeconds": 60,
            "timeoutSeconds": 20,
            "maxConsecutiveFailures": 3
        }
    ],
    "labels": {
        {{#networking.virtual-host}}
        "HAPROXY_GROUP":"external",
        "HAPROXY_0_VHOST":"{{networking.virtual-host}}",
        "HAPROXY_0_REDIRECT_TO_HTTPS": "{{networking.https-redirect}}",
        {{/networking.virtual-host}}
        "DCOS_SERVICE_NAME": "{{service.name}}",
        "DCOS_SERVICE_SCHEME": "http",
        "DCOS_SERVICE_PORT_INDEX": "0",
        "MARATHON_SINGLE_INSTANCE_APP": "true",
    },
    "upgradeStrategy":{
      "minimumHealthCapacity": 0,
      "maximumOverCapacity": 0
    }{{#storage.local-volumes.pinned-hostname}},
    "constraints": [["hostname", "CLUSTER", "{{storage.local-volumes.pinned-hostname}}"]]
    {{/storage.local-volumes.pinned-hostname}}
}
