{
    "type": "object",
    "properties": {
        "service": {
            "type": "object",
            "description": "DC/OS Apache Cassandra service configuration properties",
            "required": [
                "name",
                "user",
                "beta-optin"
            ],
            "properties": {
                "rack": {
                    "default": "rac1",
                    "type": "string",
                    "description": "The name of the rack this cluster is running on"
                },
                "secret_name": {
                    "default": "",
                    "type": "string",
                    "description": "Name of the Secret Store credentials to use for DC/OS service authentication. This should be left empty unless service authentication is needed."
                },
                "zk_servers": {
                    "default": "master.mesos:2181",
                    "type": "string",
                    "description": "The comma-separated hostnames for the zookeeper clusters to retain scheduler state in"
                },
                "user": {
                    "default": "core",
                    "type": "string",
                    "description": "The user that runs the Cassandra nodes and owns the Mesos sandbox."
                },
                "remote_seeds": {
                    "default": "",
                    "type": "string",
                    "description": "A comma-separated list of seed nodes from other clusters in a multi-datacenter deployment"
                },
                "name": {
                    "default": "cassandra",
                    "type": "string",
                    "description": "The name of the Cassandra service instance."
                },
                "mesos_api_version": {
                    "default": "V0",
                    "type": "string",
                    "description": "Configures the Mesos API version to use. Possible values: V0 (non-HTTP), V1 (HTTP)"
                },
                "data_center": {
                    "default": "dc1",
                    "type": "string",
                    "description": "The name of the data center this cluster is running in"
                },
                "principal": {
                    "default": "",
                    "type": "string",
                    "description": "The principal for the service instance."
                },
                "beta-optin": {
                    "default": "",
                    "type": "boolean",
                    "title": "Agree to Beta terms",
                    "description": "I have been invited to the Beta Program and accept all the terms of the Beta Agreement."
                }
            }
        },
        "nodes": {
            "type": "object",
            "description": "DC/OS Apache Cassandra node configuration properties",
            "required": [
                "cpus",
                "mem",
                "disk",
                "heap",
                "count"
            ],
            "properties": {
                "mem": {
                    "default": 10240,
                    "type": "integer",
                    "description": "The amount of memory, in MB, allocated to the Cassandra process."
                },
                "disk_type": {
                    "default": "ROOT",
                    "type": "string",
                    "description": "Disk type to be used for storing Cassandra data. See documentation. [ROOT, MOUNT]"
                },
                "disk": {
                    "default": 10240,
                    "type": "integer",
                    "description": "The amount of disk, in MB, allocated to the Cassandra process."
                },
                "placement_constraint": {
                    "default": "",
                    "type": "string",
                    "description": "The Marathon-style placement constraint string controlling node placement"
                },
                "count": {
                    "default": 3,
                    "type": "integer",
                    "description": "The number of Cassandra nodes in the cluster."
                },
                "cpus": {
                    "default": 0.5,
                    "type": "number",
                    "description": "The number of cpu shares allocated to the Cassandra process."
                },
                "heap": {
                    "type": "object",
                    "description": "The Cassandra process JVM heap configuration object.",
                    "required": [
                        "size",
                        "new",
                        "gc"
                    ],
                    "properties": {
                        "new": {
                            "default": 100,
                            "type": "integer",
                            "description": "The amount of JVM new generation heap, in MB, allocated to the Cassandra process."
                        },
                        "gc": {
                            "default": "CMS",
                            "type": "string",
                            "description": "The Garbage collector for JVM (Either G1 or CMS).",
                            "enum": [
                                "G1",
                                "CMS"
                            ]
                        },
                        "size": {
                            "default": 2048,
                            "type": "integer",
                            "description": "The amount of JVM heap, in MB, allocated to the Cassandra process."
                        }
                    },
                    "additionalProperties": false
                }
            },
            "additionalProperties": false
        },
        "cassandra": {
            "type": "object",
            "description": "Apache Cassandra configuration properties",
            "required": [
                "cluster_name",
                "jmx_port",
                "num_tokens",
                "max_hint_window_in_ms",
                "hinted_handoff_enabled",
                "hinted_handoff_throttle_in_kb",
                "max_hints_delivery_threads",
                "batchlog_replay_throttle_in_kb",
                "partitioner",
                "key_cache_save_period",
                "row_cache_size_in_mb",
                "row_cache_save_period",
                "commitlog_sync_period_in_ms",
                "commitlog_segment_size_in_mb",
                "concurrent_reads",
                "concurrent_writes",
                "concurrent_counter_writes",
                "memtable_allocation_type",
                "index_summary_resize_interval_in_minutes",
                "storage_port",
                "start_native_transport",
                "native_transport_port",
                "start_rpc",
                "rpc_port",
                "rpc_keepalive",
                "thrift_framed_transport_size_in_mb",
                "tombstone_warn_threshold",
                "tombstone_failure_threshold",
                "column_index_size_in_kb",
                "batch_size_warn_threshold_in_kb",
                "batch_size_fail_threshold_in_kb",
                "compaction_throughput_mb_per_sec",
                "sstable_preemptive_open_interval_in_mb",
                "read_request_timeout_in_ms",
                "range_request_timeout_in_ms",
                "write_request_timeout_in_ms",
                "counter_write_request_timeout_in_ms",
                "cas_contention_timeout_in_ms",
                "truncate_request_timeout_in_ms",
                "request_timeout_in_ms",
                "dynamic_snitch_update_interval_in_ms",
                "dynamic_snitch_reset_interval_in_ms",
                "dynamic_snitch_badness_threshold",
                "internode_compression",
                "max_hints_file_size_in_mb",
                "hints_flush_period_in_ms",
                "concurrent_materialized_view_writes",
                "commitlog_total_space_in_mb",
                "roles_update_interval_in_ms",
                "permissions_update_interval_in_ms",
                "key_cache_keys_to_save",
                "row_cache_keys_to_save",
                "counter_cache_keys_to_save",
                "file_cache_size_in_mb",
                "memtable_heap_space_in_mb",
                "memtable_offheap_space_in_mb",
                "memtable_cleanup_threshold",
                "memtable_flush_writers",
                "listen_on_broadcast_address",
                "internode_authenticator",
                "native_transport_max_threads",
                "native_transport_max_frame_size_in_mb",
                "native_transport_max_concurrent_connections",
                "native_transport_max_concurrent_connections_per_ip",
                "rpc_min_threads",
                "rpc_max_threads",
                "rpc_send_buff_size_in_bytes",
                "rpc_recv_buff_size_in_bytes",
                "concurrent_compactors",
                "stream_throughput_outbound_megabits_per_sec",
                "inter_dc_stream_throughput_outbound_megabits_per_sec",
                "streaming_socket_timeout_in_ms",
                "phi_convict_threshold",
                "buffer_pool_use_heap_if_exhausted",
                "disk_optimization_strategy",
                "max_value_size_in_mb",
                "otc_coalescing_strategy"
            ],
            "properties": {
                "rpc_max_threads": {
                    "default": 2048,
                    "type": "integer",
                    "description": "The maximum thread pool size for remote procedure calls"
                },
                "dynamic_snitch_reset_interval_in_ms": {
                    "default": 600000,
                    "type": "integer",
                    "description": "The time, in ms, the snitch will wait before resetting node scores allowing bad nodes to recover."
                },
                "row_cache_keys_to_save": {
                    "default": 100,
                    "type": "integer",
                    "description": "The number of keys from the row cache to save"
                },
                "concurrent_compactors": {
                    "default": 1,
                    "type": "integer",
                    "description": "The number of concurrent compaction processes allowed to run simultaneously on a node"
                },
                "roles_update_interval_in_ms": {
                    "default": 1000,
                    "type": "integer",
                    "description": "The refresh interval for the roles cache"
                },
                "native_transport_max_frame_size_in_mb": {
                    "default": 256,
                    "type": "integer",
                    "description": "The maximum allowed size of a frame"
                },
                "concurrent_counter_writes": {
                    "default": 16,
                    "type": "integer",
                    "description": "Counter writes read the current values before incrementing and writing them back. The recommended value is (16 times the number of drives) ."
                },
                "max_hints_file_size_in_mb": {
                    "default": 128,
                    "type": "integer",
                    "description": "The maximum size of the hints file in Mb."
                },
                "authenticator": {
                    "default": "AllowAllAuthenticator",
                    "type": "string",
                    "description": "The authentication backend. It implements IAuthenticator, which is used to identify users."
                },
                "rpc_keepalive": {
                    "default": true,
                    "type": "boolean",
                    "description": "Enables or TCP keepalive for RPC connections."
                },
                "batchlog_replay_throttle_in_kb": {
                    "default": 1024,
                    "type": "integer",
                    "description": "The total throttle for log replay in Kpbs."
                },
                "tombstone_failure_threshold": {
                    "default": 100000,
                    "type": "integer",
                    "description": "The maximum number of tombstones a query can scan before aborting."
                },
                "stream_throughput_outbound_megabits_per_sec": {
                    "default": 200,
                    "type": "integer",
                    "description": "The maximum throughput of all outbound streaming file transfers on a node"
                },
                "partitioner": {
                    "default": "org.apache.cassandra.dht.Murmur3Partitioner",
                    "type": "string",
                    "description": "The partitioner used to distribute rows across the cluster. Murmur3Partitioner is the recommended setting. RandomPartitioner and ByteOrderedPartitioner are supported for legacy applications."
                },
                "storage_port": {
                    "default": 7000,
                    "type": "integer",
                    "description": "The port for inter-node communication."
                },
                "concurrent_writes": {
                    "default": 32,
                    "type": "integer",
                    "description": "Writes in Cassandra are rarely I/O bound, so the ideal number of concurrent writes depends on the number of CPU cores in your system. The recommended value is 8 times the number of cpu cores."
                },
                "max_hints_delivery_threads": {
                    "default": 2,
                    "type": "integer",
                    "description": "The maximum number of delivery threads for hinted handoff."
                },
                "commitlog_segment_size_in_mb": {
                    "default": 32,
                    "type": "integer",
                    "description": "The size of each commit log segment in Mb."
                },
                "rpc_port": {
                    "default": 9160,
                    "type": "integer",
                    "description": "The port for Thrift RPC communication."
                },
                "rpc_recv_buff_size_in_bytes": {
                    "default": 16384,
                    "type": "integer",
                    "description": "The receiving socket buffer size for remote procedure calls"
                },
                "start_native_transport": {
                    "default": true,
                    "type": "boolean",
                    "description": "If true CQL is enabled."
                },
                "rpc_send_buff_size_in_bytes": {
                    "default": 16384,
                    "type": "integer",
                    "description": "The sending socket buffer size in bytes for remote procedure calls"
                },
                "request_timeout_in_ms": {
                    "default": 10000,
                    "type": "integer",
                    "description": "The default timeout for all other requests in ms."
                },
                "compaction_throughput_mb_per_sec": {
                    "default": 16,
                    "type": "integer",
                    "description": "Throttles compaction to the specified total throughput across the node. Compaction frequency varies with direct proportion to write throughput and is necessary to limit the SSTable size. The recommended value is 16 to 32 times the rate of write throughput (in MB/second)."
                },
                "cas_contention_timeout_in_ms": {
                    "default": 1000,
                    "type": "integer",
                    "description": "The time for which the coordinator will retry CAS operations on the same row in ms."
                },
                "memtable_allocation_type": {
                    "default": "heap_buffers",
                    "type": "string",
                    "description": "The type of allocations for the Cassandra memtable. heap_buffers keep all data on the JVM heap. offheap_buffers may reduce heap utilization for large string or binary values. offheap_objects may improve heap size for small integers or UUIDs as well. Both off heap options will increase read latency."
                },
                "otc_coalescing_strategy": {
                    "default": "TIMEHORIZON",
                    "type": "string",
                    "description": "The strategy to use for coalescing network messages"
                },
                "max_hint_window_in_ms": {
                    "default": 10800000,
                    "type": "integer",
                    "description": "The maximum amount of time, in ms, that hints are generates hints for an unresponsive node."
                },
                "batch_size_fail_threshold_in_kb": {
                    "default": 50,
                    "type": "integer",
                    "description": "Fail batch sizes exceeding this value in kilobytes. Caution should be taken on increasing the size of this threshold as it can lead to node instability."
                },
                "row_cache_size_in_mb": {
                    "default": 0,
                    "type": "integer",
                    "description": "Maximum size of the row cache in memory. Row cache can save more time than key_cache_size_in_mb, but is space-intensive because it contains the entire row. Use the row cache only for hot rows or static rows. 0 disables the row cache."
                },
                "buffer_pool_use_heap_if_exhausted": {
                    "default": true,
                    "type": "boolean",
                    "description": "Allocate on-heap memory when the SSTable buffer pool is exhausted"
                },
                "write_request_timeout_in_ms": {
                    "default": 2000,
                    "type": "integer",
                    "description": "The time that the coordinator waits for write operations to complete in ms."
                },
                "key_cache_keys_to_save": {
                    "default": 100,
                    "type": "integer",
                    "description": "The number of keys from the key cache to save"
                },
                "commitlog_sync_period_in_ms": {
                    "default": 10000,
                    "type": "integer",
                    "description": "The number of milliseconds between disk fsync calls."
                },
                "listen_on_broadcast_address": {
                    "default": false,
                    "type": "boolean",
                    "description": "Listen on the address set in broadcast_address property"
                },
                "index_summary_resize_interval_in_minutes": {
                    "default": 60,
                    "type": "integer",
                    "description": "How frequently index summaries should be re-sampled in minutes. This is done periodically to redistribute memory from the fixed-size pool to SSTables proportional their recent read rates."
                },
                "phi_convict_threshold": {
                    "default": 8,
                    "type": "integer",
                    "description": "The sensitivity of the failure detector on an exponential scale"
                },
                "authorizer": {
                    "default": "AllowAllAuthorizer",
                    "type": "string",
                    "description": "The authorization backend. It implements IAuthenticator, which limits access and provides permissions."
                },
                "memtable_cleanup_threshold": {
                    "default": 0.11,
                    "type": "number",
                    "description": "The ratio used for automatic memtable flush"
                },
                "internode_authenticator": {
                    "default": "org.apache.cassandra.auth.AllowAllInternodeAuthenticator",
                    "type": "string",
                    "description": "The internode authentication backend"
                },
                "num_tokens": {
                    "default": 256,
                    "type": "integer",
                    "description": "The number of tokens assigned to each node."
                },
                "max_value_size_in_mb": {
                    "default": 256,
                    "type": "integer",
                    "description": "The maximum size of any value in SSTables"
                },
                "native_transport_max_concurrent_connections_per_ip": {
                    "default": -1,
                    "type": "integer",
                    "description": "The maximum number of concurrent client connections per source IP address"
                },
                "commitlog_total_space_in_mb": {
                    "default": 8192,
                    "type": "integer",
                    "description": "The total size of the commit log in Mb."
                },
                "memtable_offheap_space_in_mb": {
                    "default": 2048,
                    "type": "integer",
                    "description": "The total amount of off-heap memory allocated for memtables"
                },
                "counter_cache_keys_to_save": {
                    "default": 100,
                    "type": "integer",
                    "description": "The number of keys from the counter cache to save"
                },
                "concurrent_materialized_view_writes": {
                    "default": 32,
                    "type": "integer",
                    "description": "The maximum number of concurrent writes to materialized views."
                },
                "thrift_framed_transport_size_in_mb": {
                    "default": 15,
                    "type": "integer",
                    "description": "Frame size (maximum field length) for Thrift."
                },
                "range_request_timeout_in_ms": {
                    "default": 10000,
                    "type": "integer",
                    "description": "The time that the coordinator waits for range scans complete in ms."
                },
                "memtable_flush_writers": {
                    "default": 8,
                    "type": "integer",
                    "description": "The number of memtable flush writer threads"
                },
                "file_cache_size_in_mb": {
                    "default": 512,
                    "type": "integer",
                    "description": "The total memory to use for SSTable-reading buffers"
                },
                "tombstone_warn_threshold": {
                    "default": 1000,
                    "type": "integer",
                    "description": "The maximum number of tombstones a query can scan before warning."
                },
                "permissions_update_interval_in_ms": {
                    "default": 1000,
                    "type": "integer",
                    "description": "The refresh interval for the permissions cache"
                },
                "cluster_name": {
                    "default": "cassandra",
                    "type": "string",
                    "description": "The name of the cluster managed by the Service"
                },
                "read_request_timeout_in_ms": {
                    "default": 5000,
                    "type": "integer",
                    "description": "The time that the coordinator waits for read operations to complete in ms."
                },
                "native_transport_max_threads": {
                    "default": 128,
                    "type": "integer",
                    "description": "The maximum number of thread handling requests"
                },
                "ssl_storage_port": {
                    "default": 7001,
                    "type": "integer",
                    "description": "The port for inter-node communication over SSL."
                },
                "internode_compression": {
                    "default": "all",
                    "type": "string",
                    "description": "Controls whether traffic between nodes is compressed. all compresses all traffic. none compresses no traffic. dc compresses between datacenters."
                },
                "batch_size_warn_threshold_in_kb": {
                    "default": 5,
                    "type": "integer",
                    "description": "Warn the operator on a batch size exceeding this value in kilobytes. Caution should be taken on increasing the size of this threshold as it can lead to node instability."
                },
                "hinted_handoff_throttle_in_kb": {
                    "default": 1024,
                    "type": "integer",
                    "description": "The maximum throttle per delivery thread in kilobytes per second."
                },
                "hinted_handoff_enabled": {
                    "default": true,
                    "type": "boolean",
                    "description": "If true, hinted handoff is enabled for the cluster."
                },
                "key_cache_save_period": {
                    "default": 14400,
                    "type": "integer",
                    "description": "The duration in seconds that keys are saved in cache. Saved caches greatly improve cold-start speeds and has relatively little effect on I/O."
                },
                "disk_optimization_strategy": {
                    "default": "ssd",
                    "type": "string",
                    "description": "The strategy for optimizing disk reads"
                },
                "truncate_request_timeout_in_ms": {
                    "default": 60000,
                    "type": "integer",
                    "description": "The time that the coordinator waits for truncate operations to complete in ms."
                },
                "sstable_preemptive_open_interval_in_mb": {
                    "default": 50,
                    "type": "integer",
                    "description": "When compacting, the replacement opens SSTables before they are completely written and uses in place of the prior SSTables for any range previously written. This setting helps to smoothly transfer reads between the SSTables by reducing page cache churn and keeps hot rows hot."
                },
                "native_transport_max_concurrent_connections": {
                    "default": -1,
                    "type": "integer",
                    "description": "The maximum number of concurrent client connections"
                },
                "row_cache_save_period": {
                    "default": 0,
                    "type": "integer",
                    "description": "Duration in seconds that rows are saved in cache. 0 disables caching."
                },
                "native_transport_port": {
                    "default": 9042,
                    "type": "integer",
                    "description": "The port for CQL communication."
                },
                "start_rpc": {
                    "default": false,
                    "type": "boolean",
                    "description": "If true Thrift RPC is enable. This is deprecated by may be necessary for legacy applications."
                },
                "dynamic_snitch_badness_threshold": {
                    "default": 0.1,
                    "type": "number",
                    "description": "Sets the performance threshold for dynamically routing client requests away from a poorly performing node."
                },
                "dynamic_snitch_update_interval_in_ms": {
                    "default": 100,
                    "type": "integer",
                    "description": "The time, in ms, the snitch will wait before updating node scores."
                },
                "memtable_heap_space_in_mb": {
                    "default": 2048,
                    "type": "integer",
                    "description": "The amount of on-heap memory allocated for memtables"
                },
                "column_index_size_in_kb": {
                    "default": 64,
                    "type": "integer",
                    "description": "The granularity of the index of rows within a partition. For huge rows, decrease this setting to improve seek time. If you use key cache, be careful not to make this setting too large because key cache will be overwhelmed."
                },
                "streaming_socket_timeout_in_ms": {
                    "default": 86400000,
                    "type": "integer",
                    "description": "The socket timeout for streaming operations"
                },
                "jmx_port": {
                    "default": 7199,
                    "type": "integer",
                    "description": "The JMX port that will be used to interface with the Cassandra application."
                },
                "concurrent_reads": {
                    "default": 16,
                    "type": "integer",
                    "description": "For workloads with more data than can fit in memory, the bottleneck is reads fetching data from disk. Setting to (16 times the number of drives) allows operations to queue low enough in the stack so that the OS and drives can reorder them."
                },
                "inter_dc_stream_throughput_outbound_megabits_per_sec": {
                    "default": 200,
                    "type": "integer",
                    "description": "The maximum throughput of all streaming file transfers between datacenters"
                },
                "hints_flush_period_in_ms": {
                    "default": 10000,
                    "type": "integer",
                    "description": "The time, in ms, for the period in which hints are flushed to disk."
                },
                "rpc_min_threads": {
                    "default": 16,
                    "type": "integer",
                    "description": "The minimum thread pool size for remote procedure calls"
                },
                "counter_write_request_timeout_in_ms": {
                    "default": 5000,
                    "type": "integer",
                    "description": "The time that the coordinator waits for counter write operations to complete in ms."
                }
            },
            "additionalProperties": false
        }
    }
}