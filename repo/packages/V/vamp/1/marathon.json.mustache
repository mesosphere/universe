{
    "id": "/vamp/{{vamp.vamp-id}}",
    "instances": 1,
    "cpus": {{vamp.cpu}},
    "mem": {{vamp.memory}},
    "container": {
        "type": "DOCKER",
        "docker": {
        "image": "{{resource.assets.container.docker.vamp}}",
        "network": "BRIDGE",
        "portMappings": [
          {
            "containerPort": 8080,
            "hostPort": 0,
            "name": "vip0",
            "labels": {
              "VIP_0": "{{vamp.vamp-internal-vip}}"
            }
          }
        ],
        "forcePullImage": {{vamp.force-pull-image}}
        }
    },
    "labels": {
      "DCOS_SERVICE_NAME": "{{vamp.vamp-id}}",
      "DCOS_SERVICE_SCHEME": "http",
      "DCOS_SERVICE_PORT_INDEX": "0"
    },
    "env": {
        "VAMP_GATEWAY_DRIVER_LOGSTASH_HOST": "{{vamp.logstash}}",
        "VAMP_PERSISTENCE_DATABASE_ELASTICSEARCH_URL": "{{vamp.elasticsearch-url}}",
        "VAMP_PULSE_ELASTICSEARCH_URL": "{{vamp.elasticsearch-url}}",
        "VAMP_HTTP_API_PORT": "{{vamp.http-api-port}}",
        "VAMP_WAIT_FOR": "{{vamp.elasticsearch-url}}/.kibana",
        "VAMP_WORKFLOW_DRIVER_VAMP_URL": "http://{{vamp.vamp-internal-vip}}"
    },
    "healthChecks": [
      {
        "protocol": "TCP",
        "gracePeriodSeconds": 30,
        "intervalSeconds": 10,
        "timeoutSeconds": 5,
        "portIndex": 0,
        "maxConsecutiveFailures": 5
      }
    ]
}
