{
  "type": "object",
  "properties": {
    "service": {
      "type": "object",
      "description": "DC/OS service configuration properties",
      "properties": {
        "name": {
          "description": "The name of the service instance",
          "type": "string"
        },
        "namespace": {
          "description": "The namespace for this service instance",
          "type": "string"
        },
        "mesosApiVersion": {
          "description": "Configures the Mesos API version to use. Possible values: V0 (non-HTTP), V1 (HTTP)",
          "type": "string",
          "enum": [
            "V0",
            "V1"
          ],
          "default": "V1"
        },
        "mesosAuthNZ": {
          "title": "Mesos authNZ control for the pool scheduler",
          "description": "Defines whether the pool schedulers should try to authorize with Mesos or not. Set to non-empty string by the apiserver in case when authNZ should be enabled",
          "type": "string",
          "default": ""
        },
        "healthcheckGracePeriod": {
          "title": "Pool tasks healthcheck grace period (in seconds)",
          "description": "Defines the period of time after start of the container when failed healthchecks will be ignored",
          "type": "string"
        },
        "healthcheckInterval": {
          "title": "Pool tasks healthcheck interval (in seconds)",
          "description": "Defines how often should the healthcheck be executed. At most one healthcheck is going to execute at any given time.",
          "type": "string"
        },
        "healthcheckMaxfail": {
          "title": "Pool tasks healthcheck maximum number of consecutive failures before declaring as unhealthy",
          "description": "Defines how many failures in a row mark the task as failed  and force Mesos to kill it",
          "type": "string"
        },
        "healthcheckCmdExecutionTimeout": {
          "title": "Maximum amount of time that the healthcheck command itself is allowed to execute",
          "description": "This is the amount of that that the actual healthcheck command is allowed to execute.",
          "type": "string"
        },
        "healthcheckTimeout": {
          "title": "Maximum amount of time that Mesos will wait for the healthcheck container to finish executing",
          "description": "This parameter should be bigger than healthcheckCheckTimeout as the execution time as seen by Mesos includes the container setup as well as the time spent by the healthcheck executing the test.",
          "type": "string"
        },
        "specFile": {
          "description": "The name of the service spec yaml file.",
          "type": "string",
          "default": "svc.yml"
        },
        "secretName": {
          "description": "Name of the Secret Store credentials to use for DC/OS service authentication. This should be left empty unless service authentication is needed.",
          "type": "string",
          "default": ""
        },
        "user": {
          "description": "The user that the service will run as.",
          "type": "string",
          "default": "root"
        },
        "principal": {
          "description": "The principal for the service instance.",
          "type": "string",
          "default": ""
        },
        "metricsPrefix": {
          "title": "The metrics prefix",
          "description": "The common prefix shared by all the metrics generated by Edge-LB",
          "type": "string",
          "default": "dcos"
        },
        "deploymentPath": {
          "title": "Edge-LB's base deployment path",
          "description": "The base deployment path to which Edge-LB has been deployed",
          "type": "string",
          "default": "/dcos-edgelb"
        },
        "disableTLSAuth": {
          "title": "Disable TLS auth",
          "description": "Enable (default) or disable TLS auth for lbmgr",
          "type": "boolean",
          "default": false
        },
        "ec2MetadataScheme": {
          "title": "AWS Metadata Scheme (optional)",
          "description": "AWS Metadata Scheme (http | https).",
          "type": "string",
          "default": "http"
        },
        "ec2MetadataHost": {
          "title": "AWS Metadata Host (optional)",
          "description": "AWS Metadata Endpoint Address.",
          "type": "string",
          "default": "169.254.169.254"
        },
        "ec2MetadataPath": {
          "title": "AWS Metadata Path (optional)",
          "description": "AWS Metadata Path.",
          "type": "string",
          "default": "/latest/meta-data/"
        },
        "ec2MetadataFetch": {
          "title": "AWS Metadata Fetch (optional)",
          "description": "Enable AWS Metadata fetching.",
          "type": "boolean",
          "default": true
        }
      }
    },
    "edgelbPool": {
      "description": "Template pod configuration properties",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "role": {
          "type": "string"
        },
        "count": {
          "title": "Node count",
          "description": "Number of Template pods to run",
          "type": "integer"
        },
        "placementConstraints": {
          "title": "Placement constraints",
          "description": "Marathon-style placement constraints for nodes. Public example: 'public_ip:CLUSTER:true,hostname:UNIQUE'",
          "type": "string"
        },
        "cpus": {
          "title": "CPU count",
          "description": "Template pod CPU requirements",
          "type": "number"
        },
        "mem": {
          "title": "Memory size (MB)",
          "description": "Template pod mem requirements (in MB)",
          "type": "integer"
        },
        "disk": {
          "title": "Disk size (MB)",
          "description": "Template pod persistent disk requirements (in MB)",
          "type": "integer"
        },
        "ports": {
          "type": "string"
        },
        "autoCertEnabled": {
          "type": "string"
        },
        "secrets": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "secret": {
                "type": "string"
              },
              "file": {
                "type": "string"
              },
              "index": {
                "type": "integer"
              }
            }
          }
        },
        "networks": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "labels": {
                "type": "string"
              },
              "index": {
                "type": "integer"
              }
            }
          }
        },
        "env": {
          "type": "array",
          "description": "Environment variables to pass through to the loadbalancer",
          "items": {
            "type": "object",
            "properties": {
              "key": {
                "description": "The name of the environment variable",
                "type": "string"
              },
              "value": {
                "description": "The value of the environment variable",
                "type": "string"
              }
            }
          }
        }
      },
      "required": [
        "cpus",
        "mem",
        "disk",
        "count"
      ]
    },
    "variables": {
      "type": "object",
      "properties": {
        "secrets": {
          "type": "string",
          "default": "secrets"
        },
        "envfile": {
          "type": "string",
          "default": "envfile"
        }
      }
    }
  }
}
