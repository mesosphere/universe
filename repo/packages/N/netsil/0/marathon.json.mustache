{
  "id": "{{netsil.name}}",
  "cpus": {{netsil.cpus}},
  "mem": {{netsil.mem}},
  "instances": {{netsil.instances}},
  "container": {
    "type": "DOCKER",
    "docker": {
      "image": "{{resource.assets.container.docker.netsil}}:{{netsil.build_branch}}-{{netsil.version_number}}",
      "forcePullImage": false,
      "network": "BRIDGE",    
      "portMappings": [
          {
              "containerPort": 80,
              "hostPort": {{netsil.https_port}},
              "protocol": "tcp"
          },
          {
              "containerPort": 2001,
              "hostPort": {{netsil.infra_stats_port}},
              "protocol": "tcp"
          },
          {
              "containerPort": 2003,
              "hostPort": {{netsil.traffic_stats_port}},
              "protocol": "udp,tcp"
          }
      ]
    }
  },
  "args": [
    "/tini",
    "-g",
    "--",
    "/root/start.sh", 
    "no-build", 
    "netsil-lite"
  ],
  "env": {
    "PRODUCT_FLAVOR": "Lite",
    "DEPLOY_ENV": "marathon",
    "BUILD_ENV": "production",
    "NODEJS_ENV": "NODE_ENV=production",
    "EVENT_TYPES": "alert,comment,event,notification",
    "NETSIL_BUILD_BRANCH": "{{netsil.build_branch}}",
    "NETSIL_VERSION_NUMBER": "{{netsil.version_number}}"
  },
  "acceptedResourceRoles": [
    "{{netsil.role}}"
  ],
  "labels": {
    "DCOS_SERVICE_NAME": "{{netsil.name}}",
    "DCOS_SERVICE_SCHEME": "http",
    "DCOS_SERVICE_PORT_INDEX": "0"
  }
}
